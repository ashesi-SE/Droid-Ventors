
<html>
	<head>
		<link rel="stylesheet" href='jquery.mobile-1.4.4.min.css'>
		<script type="text/javascript" src="jquery-1.11.1.min.js"></script>
		<script type="text/javascript" src='jquery.mobile-1.4.4.min.js'></script>

	<script>

					// syncAjax Function
					function syncAjax(u){
					console.log(u);
						var obj=$.ajax(
							{url:u,
							 async:false
							 }
						);
						console.log(obj.responseText);
						return $.parseJSON(obj.responseText);
						
					}
			

		$(document).ready(function(){

			// Login Function
			$("#login").click(function(){
			var dbname="";
			var dbcode="";
			var name1=$('#username').val();
			var password1=$('#psword').val();
			var u ="index_json_response.php?cmd=1&name="+name1+"&password="+password1;
			r=syncAjax(u);

			var nm = r.users.name1;
			var pword = r.users.password1;
			var rle = r.users.role1;

			//Conditions for loading the different pages after successful login depending on the role of the user

			if (name1 == nm && password1 == pword && rle == "passenger") {
				$("#status").fadeTo(500,1, function() { $(this).html("Success! Loading Passenger's Page...").fadeTo(5000,0,function() {location.href="#passpage"}); })
			}

			else if (name1 == nm && password1 == pword && rle == "conductor") {
				$("#status").fadeTo(500,1, function() { $(this).html("Success! Loading Conductor's Page...").fadeTo(5000,0,function() {location.href="#conpage"}); })
			}

			else if (name1 == nm && password1 == pword && rle == "manager") {
				$("#status").fadeTo(500,1, function() { $(this).html("Success! Loading Manager's Page...").fadeTo(5000,0,function() {location.href="#manpage"}); })
			}

			//Message displayed if username or password is not correct
			else {
				$("#status").fadeTo(500,1, function() { $(this).html("Invalid username or password"); })
			}

			});

		});
		</script>

	</head>


	<body>

		<!--Log In Page-->
		<div data-role="page" id="loginpage" data-theme="b">
			<div data-role="header">
				<div data-role="navbar">
					<ul>
						<h1 align="center">Ash-Transit</h1>
					</ul>
				</div>
			</div>

				<div role="main" class="ui-content" align="center"> 
				
					<img src="transitlogo.png" width="150" height="150"/>

					<p style='font-size:100%'>Login To Begin</p>

					<!-- Login form -->
					<input type="text" id="username" placeholder="username">
					<input type="password" id="psword" placeholder="******">

					<input type="button" id="login" value="Login">

					<div id="status" style="color:#FF0000" align="center"></div>
				</div>

			<div data-role="footer">
				<div data-role="navbar">
					<ul>
						<h2 align="center">Developed By: Droid-Ventors</h2>
					</ul>
				</div>
			</div>
		</div>


		<!--Manager's Page-->
		<div data-role="page" id="manpage" data-theme="b">
			<div data-role="header">
				<div data-role="navbar">
					<ul>
						<h1 align="center">Ash-Transit</h1>
					</ul>
				</div>
			</div>

				<div role="main" class="ui-content" align="center">

					<div style="color:#FF0000" align="center">Manager's Page</div>

				</div>

			<div data-role="footer">
				<div data-role="navbar">
					<ul>
						<h2 align="center">Developed By: Droid-Ventors</h2>
					</ul>
				</div>
			</div>
		</div>


		<!--Conductor's Page-->
		<div data-role="page" id="conpage" data-theme="b">
			<div data-role="header">
				<div data-role="navbar">
					<ul>
						<h1 align="center">Ash-Transit</h1>
					</ul>
				</div>
			</div>

				<div role="main" class="ui-content" align="center">

					<div style="color:#FF0000" align="center">Conductor's Page</div>

				</div>

			<div data-role="footer">
				<div data-role="navbar">
					<ul>
						<h2 align="center">Developed By: Droid-Ventors</h2>
					</ul>
				</div>
			</div>
		</div>


		<!--Passenger's Page-->
		<div data-role="page" id="passpage" data-theme="b">
			<div data-role="header">
				<div data-role="navbar">
					<ul>
						<h1 align="center">Ash-Transit</h1>
					</ul>
				</div>
			</div>

				<div role="main" class="ui-content" align="center">

					<div style="color:#FF0000" align="center">Passenger's Page</div>

				</div>

			<div data-role="footer">
				<div data-role="navbar">
					<ul>
						<h2 align="center">Developed By: Droid-Ventors</h2>
					</ul>
				</div>
			</div>
		</div>
	</body>
</html>