 <!DOCTYPE html>
    <html lang="en">

    <head>
        <link rel = "stylesheet" href = "jquery.mobile-1.4.4/jquery.mobile-1.4.4.min.css">
            <script src = "jquery.mobile-1.4.4/jquery-1.11.1.min.js"></script>
        <script src = "jquery.mobile-1.4.4/jquery.mobile-1.4.4.min.js"></script>
        
    
     <script type="text/javascript" src="function.js"></script>

     <!-- //inner script -->
     <script>
    
            function syncAjax(u){
                var obj=$.ajax(
                    {url:u,
                     async:false
                     }
                );
                return $.parseJSON(obj.responseText);
                
            }
    
        function changeConductor(){
        
            var idd=$("#select-conductor").val();   
            var u="myGroup_action.php?cmd=1&id="
                +idd;
                
                var r=syncAjax(u);
                                console.log(r);
                //location.reload();
        }
                
                var tripType;
                function mylsit(){



                   tripType=$("#tripname").val();
                   if(tripType=="ASH-CTK"){
                    tripType="Ashesi-Christ the King";
                    }
                    else{
                      tripType="Christ the King-Ashesi";  
                    }
        var u="myGroup_action.php?cmd=3&trip="+tripType;
                  
            var r=syncAjax(u);
            
            if(r.result==0){
                $("divStatus").text(r.message);
                return;
            }
            var i=0;

            var length=r.bookings.lenght;
            if(length==0){
                alert("No bookings made yet!");
                return;
            }
            for(i=0;i<r.bookings.length;i++){

                //$("#myList").text(r.person[i].username);
                
                   var parent = document.getElementById('listview');
            var listItem = document.createElement('li');
            listItem.setAttribute('id','listitem');
            
            var name=r.bookings[i].name;
                        var id=r.bookings[i].id;
                        
           
            listItem.innerHTML="<a href='#pagefive' onclick='myDetails("+id+")'><h3>"+name+"</h3></a>";
            parent.appendChild(listItem);
            
            var list = document.getElementById('listview');
            $(list).listview().listview("refresh");
            
                        
                        
        }                      
}


function myDetails(id){
     
   
    var u="myGroup_action.php?cmd=4&pid="+id+"&trip="+tripType;
     
        alert(u);           
            var r=syncAjax(u);
            
            if(r.result==0){
                $("divStatus").text(r.message);
                return;
            }
            var i=0;
                        var pid; var name; var phone; var t_name; var destination; var seat_no; var t_date;
            for(i=0;i<r.bookings.length;i++){
                            
                         pid=r.bookings[i].id;
                         
                        name=r.bookings[i].name;
                        
                        phone=r.bookings[i].phone;
                        t_name=r.bookings[i].t_name;
                        destination=r.bookings[i].destination;
                        seat_no=r.bookings[i].seat_no; 
                        t_date=r.bookings[i].t_date; 
                        }
                        
                        $("#name").val(name);
                        $("#date").val(t_date);
                        $("#location").val(destination);
                        $("#contact").val(phone);
                        
}
    



function updateTime(){
        var myId=$("#tripname").val();   
         var location=$("#select-location").val();
         //alert(myId);
           //alert(location);
            var u="myGroup_action.php?cmd=2&id="+location+"&tripname="+myId;
                        console.log(u);
        var r=syncAjax(u);
                if(r.result==0){
                    
                    $("#status").fadeTo(500,1, function() { $(this).html("The various pick up times has been suceccesfully set.").fadeTo(5000,0,function() {location.href="#pagefour"}); })
                    return;
                }
                
                $("#status").fadeTo(500,1, function() { $(this).html("The various pick up times has been suceccesfully set.").fadeTo(5000,0,function() {location.href="#pagefour"}); })
}




    </script>


<!-- end of inner script -->



      <meta name="viewport" content="width=device-width,initial-scale=1"></meta>
      
     </head>   


    <body>
<div data-role="page" id="pageOne" data-theme="b">
<div data-role="header">

    <h1> ASH_TRANSIT</h1>
    
    </div>
<div data-role="content">
    <div align="center">
            <a href="#pagefour" data-role="button" data-inline="true" > Set Trip details First</a>
               </div>
            <div align="center">
            <a href="#pagethree" data-role="button" data-inline="true" onclick="mylsit()"> View Reservations List</a>
        </div>
            

    </div>
</div>
        
    	<div data-role="page" id="pagefour" data-theme="b">
    <div data-role="header">

    <h1> ASH_TRANSIT</h1>


    </div>
     <div data-role="collapsible" >

<!-- sets name for the trip -->
<h1>Trip Details</h1>
<div data-role="content">

<div class="ui-select" id="day-button" class="ui-btn ui-icon-carat-d ui-btn-icon-right ui-corner-all ui-shadow">
                                 <select name="day" id="tripname" data-native-menu="false">
                                 <option value="CTK-ASH">CTK-ASH</option>
                                 <option value="ASH-CTK">ASH-CTK</option>
                  
                                </select></div>


            
    
    </div>
  </div>

    <!-- sets bus type and seats available -->
      <div data-role="collapsible" >
<h1>Seat Details</h1>
            <div data-role="content">

     <div class="ui-select" id="day-button" class="ui-btn ui-icon-carat-d ui-btn-icon-right ui-corner-all ui-shadow">
                                 <select name="day" id="busSize" data-native-menu="false">
                                 <option value="Big Bus">Big Bus</option>
                                 <option value="Small Bus">Small Bus </option>
                  
                                </select></div>
       <label for="tCapacity">Today's actual capacity:</label>
                             <input type="text" name="tCapacity" id="tCapacity">
  
   
                              <!-- saves details entered -->
            <button id="save"  width="10%" >Save</button>

    <!-- <div data-role="popup" id="popupCloseRight" class="ui-content" style="max-width:280px">
    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
    <p>Trip Saved</p>
</div> -->
    
</div>
    </div>




<div data-role="collapsible">       
 Â <h1>Set Time</h1> 
 <div data-role="content">
     <fieldset data-role="controlgroup">
                                  
     <label for="select-location">Select Current Location</label>
     <select name="select-location" id="select-location">
      
                    <option>Select Current Location</option>
                    <option value="1">Christ the King</option>
                    <option value="2">37 Station</option>
                    <option value="3">Accra Mall</option>
                        <option value="4">Legon</option>
                    <option value="5">Atomic Round About</option>
                    <option value="6">Kwabenya</option>
                        <option value="4">Abom Juction</option>
                    <option value="5">Comet</option>
                    <option value="9">Berekuso</option>
                        <option value="10">Ashesi</option>
     </select>                                 
    </fieldset>
     
     
     
      <div align="center">
    <a href="#" data-role="button" data-inline="true" onclick="updateTime()"> Set Time</a>
      </div>
  </div>
  </div>

              <div style="color:red" id="status"></div>


            <div data-role="controlgroup" data-type="horizontal" align ="center">

    <p  width="70%" >Number of available Seats</p>
                <p id='seats' style='font-size:250%'>0</p><p></p>


                             <Caption of group:</p>
                        <button id='add'>Add</button>
                        <button id="subtract">Subtract</button>
                        
                        

            </div>

    </div>


    <div data-role="page" id="pagethree" data-theme="b">
                    <div data-role="header" data-position="fixed">      
                <h1>ASH TRANSIT</h1>
                <div data-role="navbar" data-position="fixed">
                    <ul>    
                        <li><a href="#" data-transition="slide" data-icon="home" data-iconpos="left">Trip Details</a></li>
                    </ul>
                </div>
            </div>
        
                      <div role="main" class="ui-content" data-position="fixed">
            
            
            <ul data-role="listview" id="listview">
                
        <li data-role="list-divider">
                    
                </li>
                
            </ul>
         </div>
                    
                    <div data-role="footer" data-position="fixed">
                        <h3>Droid-Ventors@AshSoftEng2014</h3>   
                    </div>
    
            </div> 

            <div data-role="page" id="pagefive" data-theme="b"> 
                    <div data-role="header" data-position="fixed">      
                <div data-role="navbar" data-position="fixed">
                    <ul>    
                        <li><a href="#" data-transition="slide" data-icon="home" data-iconpos="left">Trip Details</a></li>
                    </ul>
                </div>
            </div>
        
                      <div role="main" class="ui-content" data-position="fixed">
            
            
                
  <div data-role="fieldcontain">
    <label for="name">Passenger Name:</label>
    <input type="text" name="name" id="name" value=""  />
</div>
 <div data-role="fieldcontain">
    <label for="date">Trip date Date:</label>
    <input type="text" name="date" id="date" value=""  />
</div>
  <div data-role="fieldcontain">
    <label for="location">Pick up Location:</label>
    <input type="text" name="location" id="location" value=""  />
</div>
  <div data-role="fieldcontain">
    <label for="contact">Contact Number:</label>
    <input type="text" name="contact" id="contact" value=""  />
</div>
 
                                

     
         </div>
                    
                    <div data-role="footer" data-position="fixed">
                        <h3>Droid-Ventors@AshSoftEng2014</h3>   
                    </div>
    
            </div> 
     
     
     
     
         
 
     
     
     
     
  </body>
  </html>